<!DOCTYPE html>
<html>
<head>
    <title>How was your experience at bike feast</title>
</head>
<body style="font-family:Arial; text-align:center; margin-top:50px;">
    <h1>How was your experience at bike feast</h1>

    <!-- List of items -->
    <ul id="log-list" style="list-style:none; padding:0; font-size:20px;">
    </ul>
    <!-- Input + button -->

    <script>
    const logList = document.getElementById("log-list");

    // Helper: draw the log list + optional error
    function renderList(log) {
        logList.innerHTML = "";
        log.forEach(item => {
            const li = document.createElement("li");
            li.innerHTML = `<img src="/static/${item}.png" 
                     alt="${item}" 
                     style="max-width:10%; height:auto; cursor:pointer;">`;


            // hover effect
            li.addEventListener("mouseover", () => {
                li.style.backgroundColor = "#f0f0f0";
                li.style.margin = "8px 0";
                li.style.padding = "10px 15px";
                li.style.borderRadius = "6px";
                li.style.boxShadow = "0 2px 5px rgba(0,0,0,0.1)";
            });
            li.addEventListener("mouseout", () => {
                li.style.backgroundColor = "";
                li.style.margin = "";
                li.style.padding = "";
                li.style.borderRadius = "";
                li.style.boxShadow = "";
            });

            // click â†’ tell server which item
            li.addEventListener("click", async () => {
                try {
                    await fetch("/item_clicked", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({"name" : item})
                    });
                    window.location.href = "/";
                } catch (err) {
                    console.error("Error sending click:", err);
                }
            });

            logList.appendChild(li);
        });
    }

    // Poll for updates
    setInterval(async () => {
        try {
            const response = await fetch("/get_log");
            const data = await response.json();
            renderList(data.log);
        } catch (err) {
            console.error("Polling error:", err);
        }
    }, 1000);
    </script>
</body>
</html>